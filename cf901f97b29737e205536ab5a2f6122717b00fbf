{
  "comments": [
    {
      "key": {
        "uuid": "4df8c392_ba75ecbd",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 16,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "Computes should have this disabled",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 41
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "190f1259_d490f0c0",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 16,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "As I understand it, there are no specific compute or controller nodes as the openstack services are containerized. The VMs are spawned in the worker node(s) of the kubernetes cluster.\nI agree that the master node should not have those (or any?) labels.",
      "parentUuid": "4df8c392_ba75ecbd",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 41
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "756b146e_2533f1db",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 16,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-31T13:36:05Z",
      "side": 1,
      "message": "if a node has openstack-control-plane\u003denabled, the openstack control plane containers will be deployed there. I think 192.168.122.3 should have this enabled but 192.168.122.4 and .5 should not",
      "parentUuid": "190f1259_d490f0c0",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 41
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "320c2b8e_98083246",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 16,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-06-03T09:56:24Z",
      "side": 1,
      "message": "I issued kubectl describe node \u003cmaster1, node1, node2\u003e and it shows that (although the labels assigned by the playbook are all there) there is an additional label on each:\neither \"node-role.kubernetes.io/node\u003dtrue\" or \"node-role.kubernetes.io/master\u003dtrue\" plus property \"Roles:\" either \"master\" or \"node\". The way it works, as I understand it, is that in cluster members with role \u0027master\u0027, only pods of kube-system namespace are deployed while pods of namespaces ceph and openstack are placed only in cluster members of role \u0027node\u0027.\nSo, I think, all openstack modules/functions, both controller and compute (or e.g. neutron routers, ...), will be pods launched in nodeX cluster members.\nAll of these labels should be placed in all nodeX.\n\nhttp://paste.openstack.org/show/752428/\n(this is from an HA deployment, but the principle should be the same)",
      "parentUuid": "756b146e_2533f1db",
      "range": {
        "startLine": 16,
        "startChar": 0,
        "endLine": 16,
        "endChar": 41
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd8e21d5_8da92d31",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 17,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "opnfv node and controller should have compute-node disabled",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "092040dc_1f1286c1",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 17,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "I think (but I could be wrong) that the opnfv node is not member of the kubernetes cluster and not targeted by kubectl commands like this one.\nFor controller, see above.",
      "parentUuid": "cd8e21d5_8da92d31",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d5a01b52_1f007ffa",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 17,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-31T13:36:05Z",
      "side": 1,
      "message": "Correct, I was wrong about opnfv. 192.168.122.4 and 192.168.122.5 should have this enabled",
      "parentUuid": "092040dc_1f1286c1",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 40
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "780db682_7cda57b1",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 60,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "it would be great to control this version too through an env. variable",
      "range": {
        "startLine": 60,
        "startChar": 65,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "212caab2_2f377080",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 60,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "will do",
      "parentUuid": "780db682_7cda57b1",
      "range": {
        "startLine": 60,
        "startChar": 65,
        "endLine": 60,
        "endChar": 72
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5d129e63_e1db4630",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 67,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "Try using ansible modules. It things fail is easier to debug: https://docs.ansible.com/ansible/latest/modules/unarchive_module.html",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 27
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9dc4fb44_0afb3f6c",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 67,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "I had tried to use unarchive module at the beginning (in fact it was here, commented out, until a couple of PS back) but it is not working. I don\u0027t remember the failure, I\u0027ll come back on this.\nIn general, I agree with the suggestion for using ansible modules when possible.",
      "parentUuid": "5d129e63_e1db4630",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 27
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a63e8907_55de797f",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 67,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-31T13:36:05Z",
      "side": 1,
      "message": "ok. I must say that I had never used it so not sure if it is buggy",
      "parentUuid": "9dc4fb44_0afb3f6c",
      "range": {
        "startLine": 63,
        "startChar": 0,
        "endLine": 67,
        "endChar": 27
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "3a79934f_0ef854af",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 88,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "I wonder if it might be easier to create an ansible role and have things more organized. For example this could be a template or a file",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 88,
        "endChar": 36
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c7f88adf_ef727a9b",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 88,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "yes, I\u0027ll look into this in the spirit of the general comments",
      "parentUuid": "3a79934f_0ef854af",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 88,
        "endChar": 36
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "e7ddfcd2_3ff2783b",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 88,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-31T13:36:05Z",
      "side": 1,
      "message": "great! I can help you, I have experience with this role https://github.com/openstack/openstack-ansible-os_neutron",
      "parentUuid": "c7f88adf_ef727a9b",
      "range": {
        "startLine": 80,
        "startChar": 0,
        "endLine": 88,
        "endChar": 36
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ebd5feac_bf350a2f",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 137,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "better use a generic package installer, then we can reuse it for other OSs: https://docs.ansible.com/ansible/latest/modules/package_module.html",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 10
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "9c974618_47e5ac66",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 137,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "sure, I had missed the package module",
      "parentUuid": "ebd5feac_bf350a2f",
      "range": {
        "startLine": 137,
        "startChar": 0,
        "endLine": 137,
        "endChar": 10
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f5332f5f_dcb042d9",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 158,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "This is not really best practices in ansible. You should use the names defined in the inventory",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 158,
        "endChar": 25
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a579752e_ee0f0795",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 158,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "I agree, will fixed with reorganization",
      "parentUuid": "f5332f5f_dcb042d9",
      "range": {
        "startLine": 156,
        "startChar": 0,
        "endLine": 158,
        "endChar": 25
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "302ebac6_2f6e2463",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 213,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "Why these patches? I understand they fix problems in OSH, is OSH informed about these problems? Is there perhaps a patch that fixes them? I could understand this as a temporary solution but in that case, I\u0027d say it is better to git download a branch from OSH that has all these fixes",
      "range": {
        "startLine": 160,
        "startChar": 0,
        "endLine": 213,
        "endChar": 122
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "08e05e25_6a16ec46",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 213,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "Indeed, most of the patches are fixed on later versions of OSH and I\u0027ll do an update on the pinned version. A couple of points (e.g. dns_nameservers in heat template) may have to remain though.",
      "parentUuid": "302ebac6_2f6e2463",
      "range": {
        "startLine": 160,
        "startChar": 0,
        "endLine": 213,
        "endChar": 122
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "b83ade2e_39e49e47",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 213,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-31T13:36:05Z",
      "side": 1,
      "message": "Can you add a comment with the link to the patch please? Then we can keep track",
      "parentUuid": "08e05e25_6a16ec46",
      "range": {
        "startLine": 160,
        "startChar": 0,
        "endLine": 213,
        "endChar": 122
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c04aac2_5a9a8a30",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 213,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-06-03T09:56:24Z",
      "side": 1,
      "message": "removed apparmor from (generic) nova\nhttps://github.com/openstack/openstack-helm/commit/0abf9d2b20ce0b47857bc02f39c64013d68dd683#diff-8601da0646f273653c0592fa5d30c7fb\n\npoint to openstackhelm tempest image\nhttps://github.com/openstack/openstack-helm/commit/1c8cbe6be8085284f9bbe7746f78faa34390485b#diff-711f2d9c4c01270d5b0d40086bfbe6b2\n\nFix tempest test script\nhttps://github.com/openstack/openstack-helm/commit/720c72baa97923706bed79d5a1750c692f7e5d7e#diff-711f2d9c4c01270d5b0d40086bfbe6b2\n\nfix tempest values (None to null) (except admin_domain_scope)\nhttps://github.com/openstack/openstack-helm/commit/96aa69d131bd498a2fb19918d25ab438602ac8cb#diff-711f2d9c4c01270d5b0d40086bfbe6b2\n\nfix tempest values (admin_domain_scope)\nhttps://github.com/openstack/openstack-helm/commit/82c12e581d339a04b467be6ae721d8de3184afd8#diff-711f2d9c4c01270d5b0d40086bfbe6b2\n\nstill needed patches:\n- in keystone script, to copy correct clouds.yaml\n- last change in tempest values.yaml to change dns_servers",
      "parentUuid": "b83ade2e_39e49e47",
      "range": {
        "startLine": 160,
        "startChar": 0,
        "endLine": 213,
        "endChar": 122
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c9b62edd_5ba3eb95",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 231,
      "author": {
        "id": 2091
      },
      "writtenOn": "2019-05-29T15:32:47Z",
      "side": 1,
      "message": "we should create a template for /etc/resulv.conf using jinja2 instead of this",
      "range": {
        "startLine": 219,
        "startChar": 0,
        "endLine": 231,
        "endChar": 99
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d4bff2f1_863663a9",
        "filename": "xci/installer/osh/playbooks/install-openstack-helm-mini.yml",
        "patchSetId": 14
      },
      "lineNbr": 231,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-31T11:54:42Z",
      "side": 1,
      "message": "ok, I\u0027ll look into this",
      "parentUuid": "c9b62edd_5ba3eb95",
      "range": {
        "startLine": 219,
        "startChar": 0,
        "endLine": 231,
        "endChar": 99
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "14cf8ed6_d9f66954",
        "filename": "xci/playbooks/roles/bootstrap-host/templates/osh",
        "patchSetId": 14
      },
      "lineNbr": 1,
      "author": {
        "id": 585
      },
      "writtenOn": "2019-05-28T08:06:39Z",
      "side": 1,
      "message": "is this correct or should it be \"osh\"?",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "04b68215_f6256225",
        "filename": "xci/playbooks/roles/bootstrap-host/templates/osh",
        "patchSetId": 14
      },
      "lineNbr": 1,
      "author": {
        "id": 7165
      },
      "writtenOn": "2019-05-28T10:59:44Z",
      "side": 1,
      "message": "This is a symbolic link: osh -\u003e osa directory. All installers use the same playbooks and roles for configuring the localhost and the opnfv host.",
      "parentUuid": "14cf8ed6_d9f66954",
      "range": {
        "startLine": 1,
        "startChar": 0,
        "endLine": 1,
        "endChar": 3
      },
      "revId": "cf901f97b29737e205536ab5a2f6122717b00fbf",
      "serverId": "bbac25d2-bf60-4904-9ba8-a72fc000d6c5",
      "unresolved": false
    }
  ]
}